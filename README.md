# Корпоративная система GitLab


## Загрузка проекта

Для загрузки проекта необходимо иметь типовую конфигурацию 1С:Управление небольшой фирмой.
Для непосредственной работы с доработками необходимо:
- Загрузить файлы src в расширение конфигурации
- Для включения работы RLS необходимо завести на каждого пользователя свою группу доступа и добавить его в нее и включить иерархию
- Для работы уведомлений необходимо добавить внешнее рег. задание с вызовом процедур отправки уведомлений. см. Настройка уведомлений
- Для работы с мобильным приложением необходимо установить мобильную платформу на устройство и установить IP адрес устройства.

## Синхронизация с GIT

Для синхронизации с GIT необходимо установить пакетный менеджер **OneScript** - opm, и плагин GitSync

### Инициализация GitSync репозитория

Для инициализации репозитория необходимо исполнить команду в PowerShell или другом терминале

```
gitsync init -u [Пользователь хранилища] -p [Пароль пользователя] -e [Имя расширения] [Адрес хранилища] [Адрес папки src]
```
После в указаной папке будут созданы файлы VERSION и AUTHORS, которые необходимо скорректировать с соответствующими параметрами

### Синхронизация GitSync с удаленным репозиторием

Для синхронизации необходимо исполнить следующую команду в PowerShell или другом терминале

```
gitsync sync -u [Пользователь хранилища] -p [Пароль пользователя] -e [Имя расширения] -pull (*При наличии плагина отправки) [Адрес хранилища] [Адрес папки src]
```
***При наличии плагина отправки***
Необходимо добавить флаг -pull или -push, в зависимости от необходимых действий

Если отправка проиходит вручную, то необходимо в конфиге указать user.email и user.name с флагом --global
и произвести действия отправки в GIT репозиторий

# Архитектура проекта

## Общая структура проекта

### Модификация форм

**Любая** модификация форм в проекте происходит программно в общем модуле Пр_МодификацияФормСервер.
Для вызова общего модуля с модификацией необходимо дополнить процедуру общего модуля **ПриСозданииНаСервере** и передать туда параметры:

- ЭтотОбъект - ФормаКлиентскогоПриложения
- СтандартнаяОбработка - Булево - Обработка создания формы
- Отказ - Булево - Отказ от открытия формы

После необходимо описать в отдельной процедуре с наименованием [МетаданныеРодитель]_[ИмяОбъекта]_Форма_[ТипФормы] и вызвать исполнение в процедуре **ПриСозданииНаСервере**

### Новые объекты и модификация типовых

Все **созданные** объекты созданы в расширении и имеют префиксацию **Пр_**. Все добавленные объекты выведены в подситему **Пр_КорпоративнаяСистемаGitLab**.
Все **модифицируемые** процедуры и функции из основной конфигурации имеют аннотацию **Перед**, **После**, **ИзменениеИКонтроль**.

## Добавление ВИП-лимитов и изменение структуры документа ЗаданиеНаРаботу

### Документ ЗаданиеНаРаботу

Были добавлены следующие реквизиты для соответствия **Issue GitLab** и документа **ЗаданиеНаРаботу**.
Также были добавлены общие объекты для реализации **Аналитики** по заданиям, а также их **печтаные формы**

Добавленные объекты:
- Документ.ЗаданиеНаРаботу.Пр_Проект **Соответствие Issue**
- Документ.ЗаданиеНаРаботу.Пр_Идентификатор **Соответствие Issue**
- Документ.ЗаданиеНаРаботу.Пр_ОценкаВGitLab **Соответствие Issue**
- Документ.ЗаданиеНаРаботу.ФактВGitLab **Соответствие Issue**
- Документ.ЗаданиеНаРаботу.Макеты.Пр_ПФ_DOCX_ТехническоеЗадание **Печатная Форма**
- РегистрСведений.Пр_ЛимитыПоКолонкам **ВИП-Лимиты**
**Измерения**:
	- Календарь (СправочникСсылка.КалендариСотрудников)
	- Колонка (СправочникСсылка.КолонкиКалендарейСотрудников)
**Ресурсы**:
	- Лимит (Число)
- РегистрСведений.Пр_ПланФактовоеОтклонение **Аналитика**
**Измерения**:
	- Контрагент (СправочникСсылка.Контрагенты)
	- Проект (СправочникСсылка.Проекты)
	- ЗаданиеНаРаботу (ДокументСсылка.ЗаданиеНаРаботу)
	- Разработчик (СправочникСсылка.Сотрудники)
**Ресурсы**:
	- ПлановыеЗатраты (Число)
	- ФактическиеЗатраты (Число)
	- Разница (Число)
- Отчет.Пр_ПланФактовоеОтклонениеЗаданий **Аналитика**


###
